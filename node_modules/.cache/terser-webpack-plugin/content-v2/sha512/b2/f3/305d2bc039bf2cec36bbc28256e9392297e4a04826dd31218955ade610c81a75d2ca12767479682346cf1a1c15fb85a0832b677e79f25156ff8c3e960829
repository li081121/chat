{"code":"!function(n){var e={};function a(s){if(e[s])return e[s].exports;var t=e[s]={i:s,l:!1,exports:{}};return n[s].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=n,a.c=e,a.d=function(n,e,s){a.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:s})},a.r=function(n){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(n,\"__esModule\",{value:!0})},a.t=function(n,e){if(1&e&&(n=a(n)),8&e)return n;if(4&e&&\"object\"==typeof n&&n&&n.__esModule)return n;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:n}),2&e&&\"string\"!=typeof n)for(var t in n)a.d(s,t,function(e){return n[e]}.bind(null,t));return s},a.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return a.d(e,\"a\",e),e},a.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},a.p=\"\",a(a.s=0)}([function(n,e){let a,s,t=io(\"http://localhost:3000\");function i(){$(\".box-bd\").children(\":last\").get(0).scrollIntoView(!1)}$(\"#login_avatar li\").on(\"click\",(function(){$(this).addClass(\"now\").siblings().removeClass(\"now\")})),$(\"#loginBtn\").on(\"click\",(function(){console.log(1);let n=$(\"#username\").val().trim();if(console.log(n),!n)return void alert(\"请输入用户名\");let e=$(\"#login_avatar li.now img\").attr(\"src\");console.log(e),t.emit(\"login\",{username:n,avatar:e})})),t.on(\"loginError\",n=>{alert(\"用户名已经存在\")}),t.on(\"loginSuccess\",n=>{$(\".login_box\").fadeOut(),$(\".container\").fadeIn(),$(\".avatar_url\").attr(\"src\",n.avatar),$(\".user-list .username\").text(n.username),a=n.username,s=n.avatar}),t.on(\"addUser\",n=>{$(\".box-bd\").append(`\\n    <div class=\"system\">\\n      <p class=\"message_system\">\\n        <span class=\"content\">${n.username}加入了群聊</span>\\n      </p>\\n    </div>\\n  `),i()}),t.on(\"userList\",n=>{$(\".user-list ul\").html(\"\"),n.forEach(n=>{$(\".user-list ul\").append(`\\n      <li class=\"user\">\\n        <div class=\"avatar\">\\n          <img src=\"${n.avatar}\" alt=\"\" />\\n        </div>\\n        <div class=\"name\">${n.username}</div>\\n      </li>\\n    `),i()}),$(\"#userCount\").text(n.length)}),t.on(\"delUser\",n=>{$(\".box-bd\").append(`\\n      <div class=\"system\">\\n        <p class=\"message_system\">\\n          <span class=\"content\">${n.username}离开了群聊</span>\\n        </p>\\n      </div>\\n    `),i()}),$(\".btn-send\").on(\"click\",()=>{var n=$(\"#content\").html();if(console.log(n),$(\"#content\").html(\"\"),!n)return alert(\"请输入内容\");t.emit(\"sendMessage\",{msg:n,username:a,avatar:s})}),t.on(\"receiveMessage\",n=>{n.username===a?$(\".box-bd\").append(`\\n    <div class=\"message-box\">\\n      <div class=\"my message\">\\n        <img class=\"avatar\" src=\"${n.avatar}\" alt=\"\" />\\n        <div class=\"content\">\\n          <div class=\"bubble\">\\n            <div class=\"bubble_cont\">${n.msg}</div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n    `):$(\".box-bd\").append(`\\n      <div class=\"message-box\">\\n        <div class=\"other message\">\\n          <img class=\"avatar\" src=\"${n.avatar}\" alt=\"\" />\\n          <div class=\"content\">\\n            <div class=\"nickname\">${n.username}</div>\\n            <div class=\"bubble\">\\n              <div class=\"bubble_cont\">${n.msg}</div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    `),i()}),$(\"#file\").on(\"change\",(function(){var n=this.files[0],e=new FileReader;e.readAsDataURL(n),e.onload=function(){t.emit(\"sendImage\",{username:a,avatar:s,img:e.result})}})),t.on(\"receiveImage\",n=>{n.username===a?$(\".box-bd\").append(`\\n      <div class=\"message-box\">\\n        <div class=\"my message\">\\n          <img class=\"avatar\" src=\"${n.avatar}\" alt=\"\" />\\n          <div class=\"content\">\\n            <div class=\"bubble\">\\n              <div class=\"bubble_cont\">\\n                <img src=\"${n.img}\">\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    `):$(\".box-bd\").append(`\\n      <div class=\"message-box\">\\n        <div class=\"other message\">\\n          <img class=\"avatar\" src=\"${n.avatar}\" alt=\"\" />\\n          <div class=\"content\">\\n            <div class=\"nickname\">${n.username}</div>\\n            <div class=\"bubble\">\\n              <div class=\"bubble_cont\">\\n                <img src=\"${n.img}\">\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    `),$(\".box-bd img:last\").on(\"load\",(function(){i()}))}),$(\".face\").on(\"click\",(function(){$(\"#content\").emoji({button:\".face\",showTab:!1,animation:\"slide\",position:\"topRight\",icons:[{name:\"QQ表情\",path:\"lib/jquery-emoji/img/qq/\",maxNum:91,excludeNums:[41,45,54],file:\".gif\"}]})}))}]);","extractedComments":[]}